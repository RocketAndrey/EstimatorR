@page
@using NonFactors.Mvc.Grid
@model Estimator.Pages.RuChips.IndexModel
@{
    ViewData["Title"] = "ЭКБ отечественного производства";
}
<link href="~/css/mvc-grid/mvc-grid.css" rel="stylesheet" />


<div class="row">
    <div class="col">
        <h3>Cправочник ЭКБ ОП</h3>
    </div>
    <div class="col text-right">
        <a asp-page="Import" class="btn btn-outline-primary btn-sm">Импортировать список</a>
    </div>
</div>


@if (Model.Message != null)
{
    <script type="text/javascript">

        var answer = window.confirm("@Model.Message" + "\nSave data?");
        if (answer) {
            window.location.href = "/RuChips";
        }
        else {
            //some code Можно сделать отмену импорта производителей
        }
    </script>

}
<div class="row">
<div class="col">
   

    <form method="post">
        @(
            Html.Grid(Model.DirVniir).Build(columns =>
            {
                //Edit
                columns.Add().Encoded(false).RenderedAs(model => $"<a href='/RuChips/Edit/{model.Id}'><svg class=\"bi\" width=\"16\" height=\"16\"><use href=\"#bi-pencil-square\"></use></svg></a>");

                //columns.Add(model => model.Group).Titled("Группа").Sortable(true);
                //columns.Add(model => model.Subgroup).Titled("Подгруппа").Sortable(true);

                columns.Add(model => model.Name).Titled("Наименование").Sortable(true);
                columns.Add(model => model.TechCondition).Titled("ТУ").Sortable(true);
                    columns.Add(model => model.QLevel).Titled("УК").Sortable(true).Filterable(GridFilterType.Multi);
                columns.Add(model => model.Manufacturer).Titled("Завод изготовитель").Sortable(true);

                    columns.Add().Encoded(false).RenderedAs(model => $"<a href='/Manufacturer?Code-equals={model.CodeManufacturer}'><svg class=\"bi\" width=\"16\" height=\"16\"><use href=\"#bi-book\"></use></svg></a>");
              
                    columns.Add().Encoded(false).RenderedAs(model => $"<a href='/RuChips/?id={model.Id}'><svg class=\"bi\" width=\"16\" height=\"16\"><use href=\"#bi-trash\"></use></svg></a>");
            })
            .Using(GridFilterMode.Header)
            .Empty("Не найдено")
            .Filterable(GridFilterType.Double)
            .Sortable()
            .Pageable(pager =>
            {
                pager.PageSizes = new Dictionary<Int32, String> { { 0, "All" }, { 10, "10" }, { 50, "50" }, { 100, "100" }, { 1000, "1000" } };
                pager.ShowPageSizes = true;
                pager.RowsPerPage = 50;
            })
            )
    </form>

    </div>
</div>
    <script src="~/js/mvc-grid/mvc-grid.js"></script>
    <script>
        document.querySelectorAll(".mvc-grid").forEach(element => new MvcGrid(element));
    </script>
    <script>
        MvcGrid.lang = {
            default: {
                "equals": "Равно",
                "not-equals": "Не равно"
            },
            text: {
                "contains": "Содержит",
                "equals": "Равно",
                "not-equals": "Не равно",
                "starts-with": "Начинается с",
                "ends-with": "Заканчивается"
            },
            number: {
                "equals": "Равно",
                "not-equals": "Не равно",
                "less-than": "Меньше чем",
                "greater-than": "Больше чем",
                "less-than-or-equal": "Меньше или равно",
                "greater-than-o-requal": "Больше или равно"
            },
            guid: {
                "equals": "Равно",
                "not-equals": "Не равно",
            },
            filter: {
                "apply": "✓",
                "remove": "✘"
            },
            operator: {
                "select": "",
                "and": "et",
                "or": "ou"
            }
        };
        document.addEventListener('rowclick', function (e) {
    console.log('data: ', e.detail.data);
    console.log('grid: ', e.detail.grid);
    console.log('original event: ', e.detail.originalEvent);
});
    </script>
